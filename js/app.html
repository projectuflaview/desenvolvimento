<!DOCTYPE html>
<html lang="pt-br">
    <head>
        <title>My App</title>
        <meta chartset="utf-8" />

        <style>
            body {
                margin: 0;
                background-color: #f0f0f0;
                overflow: hidden;
            }
            canvas {width: 100%; height: 100%}
        </style>
    </head>
    <body>
        <script src="three.js/three.min.js"></script>
        <script src="three.js/CanvasRenderer.js"></script>
        <script src="three.js/Projector.js"></script>
        <script src="three.js/OrbitControls.js"></script>
        <script src="three.js/EditorControls.js"></script>
        <script src="three.js/TransformControls.js"></script>
        <script src="three.js/JSONLoader.js"></script>

        <script>
            var scene, camera, renderer, axes, controls;
	    var rotate = true;
	    var objects = [];

            // Set up renderer, scene and camera

            renderer = new THREE.WebGLRenderer( { antialias: true } );
            renderer.setSize( window.innerWidth, window.innerHeight );
            renderer.setClearColor( 0xeeeedd );
            document.body.appendChild( renderer.domElement );

            scene = new THREE.Scene();

            camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

            camera.position.x = 0;
            camera.position.y = 0;
            camera.position.z = 30;

            controls = new THREE.TransformControls( camera, renderer.domElement );
            controls.addEventListener( 'change', animate );
            scene.add( controls );

            // Objects

            var material = new THREE.LineBasicMaterial( {
                color: 0x0000ff
            } );

            var c = 20;

            var geom = new THREE.SphereGeometry( 5, 16, 16 );
            var mat = new THREE.MeshBasicMaterial( {
                color: 0x0000ff,
                wireframe: true
            } );

            var loader = new THREE.JSONLoader();

            loader.load( '../modelos/test.js', function ( geometry, material) {
                var material = new THREE.MeshLambertMaterial( { color: 0x505050 } );
                var object = new THREE.Mesh( geometry, material );
		console.log( geometry.vertices[ 0 ] );
                //scene.add( object );
            } );

            var geometry = new THREE.BoxGeometry( 1, 1, 1 );
	    var cubes = new THREE.Object3D();

	    for ( var i = 0; i < 5; i++ ) {
		    var cube = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { color: Math.random() * 0xffffff } ) );
		    
		    cube.position.x = Math.sin( Math.random() * 100 ) * 10;
		    cube.position.y = Math.sin( Math.random() * 100 ) * 10;
		    cube.position.z = Math.sin( Math.random() * 100 ) * 30; 

		    cube.rotation.x = Math.random() * 2 * Math.PI;
		    cube.rotation.y = Math.random() * 2 * Math.PI;
		    cube.rotation.z = Math.random() * 2 * Math.PI;
		    
		    cubes.add( cube );
		    objects.push( cube );
	    }

            controls.attach( cubes.children[ 0 ] );
	    scene.add( cubes );

            // Lights

            var dirLight = new THREE.DirectionalLight( 0xffffff, 0.7 );
            dirLight.position.set( 0, 1, 0 );
            scene.add( dirLight );
            scene.add( new THREE.AmbientLight( 0x555555 ) );

	    var light = new THREE.SpotLight( 0xffffff, 1.5 );
	    light.position.set( 0, 500, 2000 );
	    scene.add( light );
            
            function animate() {

                //requestAnimationFrame( animate );
                renderer.render( scene,camera );
            }

            animate();
            
            // Functions

            window.addEventListener( 'keydown', function ( event ) {
                console.log( event.which );
                switch ( event.keyCode ) {
                    case 81:
                          controls.setSpace( controls.space == "local" ? "world" : "local" );
                          break;
                    case 71:
                          controls.setMode( "translate" );
                          break;
                    case 82:
                          controls.setMode( "rotate" );
                          break;
                    case 83:
                          controls.setMode( "scale" );
                          break;
                    case 187:
                    case 107: // +,=,num+
                        controls.setSize( controls.size + 0.1 );
                        break;
                    case 189:
                        controls.setSize( Math.max( controls.size - 0.1, 0.1 ) );
                        break;
                    case 77:
                        console.log( cubes.children[ 0 ] );
                        //editor.enabled == true ? editor.enabled = false : editor.enabled = true;
                        break;
                }
            } );

            window.addEventListener( 'resize', onWindowResize, false );

            function onWindowResize() {

                camera.aspect = window.innerWidth / window.innerHeight;
                camera.updateProjectionMatrix();

                renderer.setSize( window.innerWidth, window.innerHeight );

            }
            
        </script>
    </body>
</html>

