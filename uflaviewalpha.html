<!DOCTYPE html>
<!-- [-->
<html lang="pt">
	<head>
		<title>UFLAView Application</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
		<style>
			body {
				font-family: Monospace;
				background-color: #f0f0f0;
				margin: 0px;
				overflow: hidden;
			}
			#posiciona {
				position: absolute;
				left: 10px;
				overflow: visible;
				box-shadow: none;
				z-index: 1000;
			}
			#fechar { 
				margin: 5px; 
				font-size: 12px;
				color-text: #449d44;
				}

			.modal-title {
			  text-align:center;
			  font-size:20px;
			  font-weight:bold;
			}
			@media screen and (min-width: 768px){
			  #myModal .modal-dialog {
			    webkit-box-shadow: 0 5px 15px rgba(0,0,0,.5);
			    box-shadow: 0 5px 15px rgba(0,0,0,.5);
			  }
			}
			#myModal .modal-header {
			  border-radius: 5px 5px 0 0;
			  background-color:#fff;
			}
			#myModal .modal-content {
			  background-color:#fff;
			  border-radius: 0;
			  padding:20px;
			  box-shadow: none;
			  background-clip:inherit;
			}
			#myModal .modal-footer {
			  background-color:#fff;
			  border-radius: 0 0 5px 5px;
			}
		</style>
	  
		<script>
			function fechar() { 
				document.getElementById("posiciona").style.display = 'none'; 
			}
		</script>
	 </head>
	 
	<body>
		<header>
			<div id="posiciona"> 
				<h1>&nbsp;&nbsp;UFLAVIEW</h1>
				<form><input type="text" id="search-criteria" onclick="this.select()"/>
					<input style="color: #fff; background-color: #2e3192; border-color: #2e3192; border-radius: 100px; font-weight: 700;" type="button" id="search" value="Pesquisar" onclick="pesquisaPredios();"/></form>
				<div id="fechar" align=right><a href="javascript:fechar();">FECHAR</a></div> 
		    </div>
		</header>

		<!-- Modal -->
		<div id="myModal" class="modal fade" role="dialog">
		     <div class="modal-dialog">
		          <div class="modal-header">
		          <button type="button" class="close" data-dismiss="modal">&times;</button>
		          <p class="modal-title">Informações Sobre o Prédio</p>
		      </div>
		      <!-- Modal content-->
		      <div class="modal-content clearable-content">
		      </div>
		      <div class="modal-footer">
		        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
		      </div>
		  </div>
		</div>

		<div name="linksModais" style="height: 0px;width: 0px;overflow:hidden;position: absolute;">
		<a id ="CEAD" data-toggle="modal" href="modal/cead.html" data-remote="modal/cead.html #modal-section" data-target="#myModal">Cead</a>
		<a id ="ALMOXARIFADO" data-toggle="modal" href="modal/almoxarifado.html" data-remote="modal/almoxarifado.html #modal-section" data-target="#myModal">Almoxarifado</a>
		<a id ="RESTAURANTE" data-toggle="modal" href="modal/restaurante.html" data-remote="modal/restaurante.html #modal-section" data-target="#myModal">Restaurante</a>
		<a id ="FAEPE" data-toggle="modal" href="modal/faepe.html" data-remote="modal/faepe.html #modal-section" data-target="#myModal">FAEPE</a>
		<a id ="CASADEHOSPEDES" data-toggle="modal" href="modal/casadehospedes.html" data-remote="modal/casadehospedes.html #modal-section" data-target="#myModal">Casa de Hospedes</a>
		<a id ="CASADEPEDRAS" data-toggle="modal" href="modal/casadaspedras.html" data-remote="modal/casadaspedras.html #modal-section" data-target="#myModal">Casa das Pedras</a>
		<a id ="complexocultural" data-toggle="modal" href="modal/complexocultural.html" data-remote="modal/complexocultural.html #modal-section" data-target="#myModal">Complexo Cultural</a>
		<a id ="GRAFICA" data-toggle="modal" href="modal/grafica.html" data-remote="modal/grafica.html #modal-section" data-target="#myModal">Grafica</a>
		<a id ="RADIOUNIVERSITARIA" data-toggle="modal" href="modal/radiouniversitaria.html" data-remote="modal/radiouniversitaria.html #modal-section" data-target="#myModal">Radio Universitaria</a>
		<a id ="CENTROEDUCACIONAL" data-toggle="modal" href="modal/centroeducacional.html" data-remote="modal/centroeducacional.html #modal-section" data-target="#myModal">Centro Educacional</a>
		<a id ="COORDSAUDE" data-toggle="modal" href="modal/coordsau.html" data-remote="modal/coordsau.html #modal-section" data-target="#myModal">Coordenadoria de Saude</a>
		<a id ="LEC" data-toggle="modal" href="modal/lec.html" data-remote="modal/lec.html #modal-section" data-target="#myModal">LEC</a>
		<a id ="guaritaportaria" data-toggle="modal" href="modal/guaritaport.html" data-remote="modal/guaritaport.html #modal-section" data-target="#myModal">Guarita Portaria Principal</a>
		<a id ="HOTEL" data-toggle="modal" href="modal/hotel.html" data-remote="modal/hotel.html #modal-section" data-target="#myModal">Hotel Alvorada</a>
		<a id ="COOPCREDSERV" data-toggle="modal" href="modal/coopcred.html" data-remote="modal/coopcred.html #modal-section" data-target="#myModal">Cooperativa de Credito dos Servidores</a>
		<a id ="UTRA" data-toggle="modal" href="modal/utra.html" data-remote="modal/utra.html #modal-section" data-target="#myModal">UTRA</a>

		<a id ="alojamentobloco1" data-toggle="modal" href="modal/alojamentobloco1.html" data-remote="modal/alojamentobloco1.html #modal-section" data-target="#myModal">Alojamento Universitario Bloco 1</a>
		<a id ="alojamentobloco2" data-toggle="modal" href="modal/alojamentobloco2.html" data-remote="modal/alojamentobloco2.html #modal-section" data-target="#myModal">Alojamento Universitario Bloco 2</a>
		<a id ="alojamentobloco3" data-toggle="modal" href="modal/alojamentobloco3.html" data-remote="modal/alojamentobloco3.html #modal-section" data-target="#myModal">Alojamento Universitario Bloco 3</a>
		<a id ="cantinaalojamento" data-toggle="modal" href="modal/cantinaalojamento.html" data-remote="modal/cantinaalojamento.html #modal-section" data-target="#myModal">Cantina Alojamento</a>
		<a id ="depositoengenhariaaguaesoloobj" data-toggle="modal" href="modal/engenharialabaguaesolo.html" data-remote="modal/engenharialabaguaesolo.html #modal-section" data-target="#myModal">Deposito Engenharia Agua e Solo</a>
		<a id ="engenhariaaguaesolo" data-toggle="modal" href="modal/engenharialabaguaesolo.html" data-remote="modal/engenharialabaguaesolo.html #modal-section" data-target="#myModal">Engenharia Agua e Solo</a>
		<a id ="tratamentoderesiduos" data-toggle="modal" href="modal/tratamentoderesiduos.html" data-remote="modal/tratamentoderesiduos.html #modal-section" data-target="#myModal">Estação de Tratamento de residuos</a>
		<a id ="estadio" data-toggle="modal" href="modal/estadio.html" data-remote="modal/estadio.html #modal-section" data-target="#myModal">Estadio UFLA</a>
		<a id ="estufa" data-toggle="modal" href="modal/estufa.html" data-remote="modal/estufa.html #modal-section" data-target="#myModal">Estufas</a>
		<a id ="Ginasio1" data-toggle="modal" href="modal/ginasio.html" data-remote="modal/ginasio.html #modal-section" data-target="#myModal">Ginasio Poliesportivo UFLA</a>
		<a id ="ginasiopoliesportivo2" data-toggle="modal" href="modal/ginasio.html" data-remote="modal/ginasio.html #modal-section" data-target="#myModal">Ginasio Poliesportivo UFLA</a>
		<a id ="IncubadoraInbatec" data-toggle="modal" href="modal/inbatec.html" data-remote="modal/inbatec.html #modal-section" data-target="#myModal">Incubadora de Empresas Inbatec</a>
		<a id ="laboratoriodeirrigacao" data-toggle="modal" href="modal/piscultura.html" data-remote="modal/piscultura.html #modal-section" data-target="#myModal">Laboratorio de Irrigação</a>
		<a id ="quadraalojamento" data-toggle="modal" href="modal/quadraalojamento.html" data-remote="modal/quadraalojamento.html #modal-section" data-target="#myModal">Quadras Alojamento</a>

		<a id ="divisaopatrimonioPROPLAG" data-toggle="modal" href="modal/divisaopatrimonio.html" data-remote="modal/divisaopatrimonio.html #modal-section" data-target="#myModal">Divisao Patrimonio PROPLAG</a>
		<a id ="divisaomaterialPROPLAG" data-toggle="modal" href="modal/divisaomaterial.html" data-remote="modal/divisaomaterial.html #modal-section" data-target="#myModal">Divisao Material PROPLAG</a>
		<a id ="ecologia" data-toggle="modal" href="modal/ecologia.html" data-remote="modal/ecologia.html #modal-section" data-target="#myModal">Departamento de Ecologia</a>
		<a id ="estacionamentoPROPLAG" data-toggle="modal" href="modal/estacionamentoproplag.html" data-remote="modal/estacionamentoproplag.html #modal-section" data-target="#myModal">Estacionamento PROPLAG</a>
		<a id ="gerenciaequipamentos" data-toggle="modal" href="modal/gerenciaequipamentos.html" data-remote="modal/gerenciaequipamentos.html #modal-section" data-target="#myModal">Gerencia de Equipamentos</a>
		<a id ="marcenaria" data-toggle="modal" href="modal/marcenaria.html" data-remote="modal/marcenaria.html #modal-section" data-target="#myModal">Marcenaria</a>

		<a id ="DBI" data-toggle="modal" href="modal/dbi.html" data-remote="modal/dbi.html #modal-section" data-target="#myModal">Departamento de Biologia</a>
		<a id ="estufasDBI" data-toggle="modal" href="modal/estufasdbi.html" data-remote="modal/estufasdbi.html #modal-section" data-target="#myModal">Estufas DBI</a>
		<a id ="fisiologiavegetal" data-toggle="modal" href="modal/fisiologiavegetal.html" data-remote="modal/fisiologiavegetal.html #modal-section" data-target="#myModal">Setor de Fisiologia Vegetal</a>
		<a id ="galpaodbi" data-toggle="modal" href="modal/galpaodbi.html" data-remote="modal/galpaodbi.html #modal-section" data-target="#myModal">Galpao DBI</a>
		<a id ="prefeitura" data-toggle="modal" href="modal/prefeitura.html" data-remote="modal/prefeitura.html #modal-section" data-target="#myModal">Prefeitura do Campus</a>
		<a id ="pv1" data-toggle="modal" href="modal/pv1.html" data-remote="modal/pv1.html #modal-section" data-target="#myModal">Pavilhão de Aulas 1</a>

		<a id ="dch" data-toggle="modal" href="modal/dch.html" data-remote="modal/dch.html #modal-section" data-target="#myModal">Departamento de Ciências do Solo</a>
		<a id ="dex" data-toggle="modal" href="modal/dex.html" data-remote="modal/dex.html #modal-section" data-target="#myModal">Departamento de Ciências Exatas</a>
		<a id ="laboratoriomultiusuarioDCS" data-toggle="modal" href="modal/laboratoriomultiusuarioDCS.html" data-remote="modal/laboratoriomultiusuarioDCS.html #modal-section" data-target="#myModal">Laboratório Multiusuário DCS</a>

		<a id ="drcaeprg" data-toggle="modal" href="modal/drcaeprg.html" data-remote="modal/drcaeprg.html #modal-section" data-target="#myModal">Reitoria (DRCA e PRG)</a>
		<a id ="dcc" data-toggle="modal" href="modal/dcc.html" data-remote="modal/dcc.html #modal-section" data-target="#myModal">Departamento de Ciências da Computação</a>

		<a id ="adufla" data-toggle="modal" href="modal/adufla.html" data-remote="modal/adufla.html #modal-section" data-target="#myModal">ADUFLA</a>
		<a id ="biblioteca" data-toggle="modal" href="modal/biblioteca.html" data-remote="modal/biblioteca.html #modal-section" data-target="#myModal">Biblioteca UFLA</a>
		<a id ="dceecas" data-toggle="modal" href="modal/dceecas.html" data-remote="modal/dceecas.html #modal-section" data-target="#myModal">Centro de Convivência</a>
		<a id ="dqi" data-toggle="modal" href="modal/dqi.html" data-remote="modal/dqi.html #modal-section" data-target="#myModal">Departamento de Química</a>
		<a id ="postopolicial" data-toggle="modal" href="modal/postopolicial.html" data-remote="modal/postopolicial.html #modal-section" data-target="#myModal">Posto Policial</a>
		<a id ="pv3" data-toggle="modal" href="modal/pv3.html" data-remote="modal/pv3.html #modal-section" data-target="#myModal">Pavilhão de Aulas 3</a>
		<a id ="pv4" data-toggle="modal" href="modal/pv4.html" data-remote="modal/pv4.html #modal-section" data-target="#myModal">Pavilhão de Aulas 4</a>
		<a id ="pv5" data-toggle="modal" href="modal/pv5.html" data-remote="modal/pv5.html #modal-section" data-target="#myModal">Pavilhão de Aulas 5</a>
		<a id ="pv6" data-toggle="modal" href="modal/pv6.html" data-remote="modal/pv6.html #modal-section" data-target="#myModal">Pavilhão de Aulas 6</a>
		<a id ="sindufla" data-toggle="modal" href="modal/sindufla.html" data-remote="modal/sindufla.html #modal-section" data-target="#myModal">SINDUFLA</a>


		<a id ="dca" data-toggle="modal" href="modal/dca.html" data-remote="modal/dca.html #modal-section" data-target="#myModal">Departamento de Ciências de Alimentos</a>
		<a id ="dca1" data-toggle="modal" href="modal/dca1.html" data-remote="modal/dca1.html #modal-section" data-target="#myModal">Departamento de Ciências de Alimentos Bloco 2</a>


		<a id ="anfiteatrodcf" data-toggle="modal" href="modal/anfiteatrodcf.html" data-remote="modal/anfiteatrodcf.html #modal-section" data-target="#myModal">Anfiteatro DCF</a>
		<a id ="biomateriaisdcf" data-toggle="modal" href="modal/biomateriaisdcf.html" data-remote="modal/biomateriaisdcf.html #modal-section" data-target="#myModal">Laboratório Multiusuário de Biomateriais</a>
		<a id ="cmac" data-toggle="modal" href="modal/cmac.html" data-remote="modal/cmac.html #modal-section" data-target="#myModal">Centro de Excelência em Matas Ciliares</a>
		<a id ="dag" data-toggle="modal" href="modal/dag.html" data-remote="modal/dag.html #modal-section" data-target="#myModal">Setor de Agricultura</a>
		<a id ="dcf" data-toggle="modal" href="modal/dcf.html" data-remote="modal/dcf.html #modal-section" data-target="#myModal">Departamento de Ciências Florestais</a>
		<a id ="estacionamentodcf" data-toggle="modal" href="modal/estacionamentodcf.html" data-remote="modal/estacionamentodcf.html #modal-section" data-target="#myModal">Estacionamento DCF</a>
		<a id ="labanatomiamadeira" data-toggle="modal" href="modal/labanatomiamadeira.html" data-remote="modal/labanatomiamadeira.html #modal-section" data-target="#myModal">Laboratório de Anatomia da Madeira</a>
		<a id ="labculttecidosplantas" data-toggle="modal" href="modal/labculttecidosplantas.html" data-remote="modal/labculttecidosplantas.html #modal-section" data-target="#myModal">Laboratório de Cultura de Tecidos de Plantas</a>

		<a id ="aviao" data-toggle="modal" href="modal/aviao.html" data-remote="modal/aviao.html #modal-section" data-target="#myModal">Aviao</a>
		<a id ="cetecmaquinasagricolas" data-toggle="modal" href="modal/cetecmaquinasagricolas.html" data-remote="modal/cetecmaquinasagricolas.html #modal-section" data-target="#myModal">CETEC Maquinas Agricolas</a>
		<a id ="deg" data-toggle="modal" href="modal/deg.html" data-remote="modal/deg.html #modal-section" data-target="#myModal">Departamento de Engenharia</a>
		<a id ="deg1" data-toggle="modal" href="modal/deg1.html" data-remote="modal/deg1.html #modal-section" data-target="#myModal">DEG Bloco 1</a>
		<a id ="deg2" data-toggle="modal" href="modal/deg2.html" data-remote="modal/deg2.html #modal-section" data-target="#myModal">DEG Bloco 2</a>
		<a id ="deganexo" data-toggle="modal" href="modal/deganexo.html" data-remote="modal/deganexo.html #modal-section" data-target="#myModal">DEG Anexo</a>
		<a id ="degprp" data-toggle="modal" href="modal/degprp.html" data-remote="modal/degprp.html #modal-section" data-target="#myModal">Centro de Desenvolvimento de Instrumentação Aplicada à Agropecuária</a>
		<a id ="dzo" data-toggle="modal" href="modal/dzo.html" data-remote="modal/dzo.html #modal-section" data-target="#myModal">Departamento de Zootecnia</a>
		<a id ="dzoanexo" data-toggle="modal" href="modal/dzoanexo.html" data-remote="modal/dzoanexo.html #modal-section" data-target="#myModal">DZO Anexo</a>
		<a id ="galpaomaquinasagricolas" data-toggle="modal" href="modal/galpaomaquinasagricolas.html" data-remote="modal/galpaomaquinasagricolas.html #modal-section" data-target="#myModal">Galpão de Maquinas Agricolas</a>
		<a id ="garagemmaqagricolas" data-toggle="modal" href="modal/garagemmaqagricolas.html" data-remote="modal/garagemmaqagricolas.html #modal-section" data-target="#myModal">Garagem Maquinas Agricolas</a>
		<a id ="salaodeconvencoes" data-toggle="modal" href="modal/salaodeconvencoes.html" data-remote="modal/salaodeconvencoes.html #modal-section" data-target="#myModal">Salão de Conveções</a>
		<a id ="salaoconvencoesanexo" data-toggle="modal" href="modal/salaoconvencoesanexo.html" data-remote="modal/salaoconvencoesanexo.html #modal-section" data-target="#myModal">Salão de Conveções Anexo</a>
		<a id ="setortransportes" data-toggle="modal" href="modal/setortransportes.html" data-remote="modal/setortransportes.html #modal-section" data-target="#myModal">Setor de Transportes</a>
		<a id ="setorvigilacia" data-toggle="modal" href="modal/setorvigilacia.html" data-remote="modal/setorvigilacia.html #modal-section" data-target="#myModal">Setor de Vigilância</a>

		<a id ="baiasdmv" data-toggle="modal" href="modal/baiasdmv.html" data-remote="modal/baiasdmv.html #modal-section" data-target="#myModal">Baias DMV</a>
		<a id ="cirurgiaveterinaria" data-toggle="modal" href="modal/cirurgiaveterinaria.html" data-remote="modal/cirurgiaveterinaria.html #modal-section" data-target="#myModal">Cirurgia Veterinária</a>
		<a id ="dmv" data-toggle="modal" href="modal/dmv.html" data-remote="modal/dmv.html #modal-section" data-target="#myModal">Departamento de Madicina Veterinária</a>
		<a id ="hospitalgrandesanimais" data-toggle="modal" href="modal/hospitalgrandesanimais.html" data-remote="modal/hospitalgrandesanimais.html #modal-section" data-target="#myModal">Hospital de Grandes Animais</a>
		<a id ="hospitalgrandesanimaisanexo" data-toggle="modal" href="modal/hospitalgrandesanimaisanexo.html" data-remote="modal/hospitalgrandesanimaisanexo.html #modal-section" data-target="#myModal">Hospital de Grandes Animais Anexo</a>
		<a id ="pv8" data-toggle="modal" href="modal/pv8.html" data-remote="modal/pv8.html #modal-section" data-target="#myModal">Pavilhão de Aulas 8</a>

		<a id ="anfiteatrodag" data-toggle="modal" href="modal/anfiteatrodag.html" data-remote="modal/anfiteatrodag.html #modal-section" data-target="#myModal">Anfiteatro DAG</a>
		<a id ="dag2" data-toggle="modal" href="modal/dag2.html" data-remote="modal/dag2.html #modal-section" data-target="#myModal">Departamento de Agronomia</a>
		<a id ="setorculturatecidos" data-toggle="modal" href="modal/setorculturatecidos.html" data-remote="modal/setorculturatecidos.html #modal-section" data-target="#myModal">Setor de Cultura de Tecidos</a>

		<a data-toggle="modal" href="3.html" data-remote="2.html #modal-section" data-target="#myModal">Page 2 Modal Content</a>
		</div>

		<script src="js/three.min.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script src="js/JSONLoader.js"> </script>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

		<script>
			var container;
			var camera, controls, scene, renderer,plano,plane,setas;
			var varBusca = -1;
			var nomes;
			var listaBusca;
			var nomesBusca;
			var mouse, raycaster;
    		var objects = [];

			init();
			animate();


			function init() {
				container = document.createElement( 'div' );
				document.body.appendChild( container );

				alert("Bem vindo ao UFLAView Alpha 2.0\nUse o botão esquerdo do mouse para rotacionar a camera\ne o botão direito para movimentar a camera.\nQualquer dúvida ou sugestão por favor entre em contato.\nDica: Procure pelas siglas do prédio desejado.");

				camera = new THREE.PerspectiveCamera( 100 ,window.innerWidth / window.innerHeight, 1, 100000 );
				camera.position.set(0,2000,0);
				camera.rotation.y = 90 * Math.PI;

				controls = new THREE.OrbitControls( camera );
  				controls.addEventListener( 'change', render );
  				controls.minDistance = 1300;
  				controls.maxDistance = 3000;
  				controls.maxPolarAngle = Math.PI/4;


				scene = new THREE.Scene();
				var ambient = new THREE.AmbientLight( 0x505050 );
				scene.add( ambient );

				var light2 = new THREE.DirectionalLight( 0xFFFFFF, 0.4 );
				light2.position.set( 0, 500, 1000 ).normalize();
				light2.rotation.z = 180 * Math.PI / 180;
				scene.add( light2 );

				var light3 = new THREE.DirectionalLight( 0xFFFFFF, 0.4 );
				light3.position.set( 1000, 500, 0 ).normalize();
				light3.rotation.z = -180 * Math.PI / 180;
				scene.add( light3 );

				var light4 = new THREE.DirectionalLight( 0xFFFFFF, 0.4 );
				light4.position.set( -1914, 500, 140 ).normalize();
				light4.rotation.y = 180 * Math.PI / 180;
				scene.add( light4 );

				var light5 = new THREE.DirectionalLight( 0xFFFFFF, 0.4 );
				light5.position.set( 176, 500, -2303 ).normalize();
				light5.rotation.y = -180 * Math.PI / 180;
				scene.add( light5 );


				var loader = new THREE.JSONLoader();
				loader.load( "json/planofinal.js", function( geometry ) {
					var material = new THREE.MeshPhongMaterial( { color:0x5ABA51 } );
					plano = new THREE.Mesh( geometry, material );
					plano.scale.set(400, 400, 400);
					scene.add( plano );
					
				});

				readTextFile("txt/nomesPrediosCarregar.txt");
				nomes.forEach(fload);

				lo = new THREE.JSONLoader();
				lo.load( "json/estradafinal.js", function( geometry ) {
					var material = new THREE.MeshPhongMaterial( { color:0x3d3d29 } );
					var obj = new THREE.Mesh( geometry, material );
					obj.geometry.computeBoundingBox();
					obj.scale.set(400, 400, 400);
					obj.name = "estrada";
					scene.add( obj );
				});

				lo2 = new THREE.JSONLoader();
				lo2.load( "json/setas.js", function( geometry ) {
					var material = new THREE.MeshPhongMaterial( { color:0xFF0000 } );
					setas = new THREE.Mesh( geometry, material );
					setas.scale.set(400, 400, 400);
					setas.name = "setas";
					scene.add( setas );
				});

				plane = new THREE.Mesh(
					new THREE.PlaneBufferGeometry( 2000, 2000, 8, 8 ),
					new THREE.MeshBasicMaterial( { color: 0x000000, opacity: 0.25, transparent: true } )
				);
				plane.visible = false;
				scene.add( plane );

				renderer = new THREE.WebGLRenderer( { antialias: true } );
				renderer.setClearColor( 0xC2E1F7 );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
				renderer.sortObjects = false;
				renderer.shadowMapEnabled = true;
				renderer.shadowMapType = THREE.PCFShadowMap;
				container.appendChild( renderer.domElement );

				raycaster = new THREE.Raycaster();
		        mouse = new THREE.Vector2();

		        readTextFile("txt/listaBusca.txt");
		        readTextFile("txt/nomesBusca.txt");
		        
		        document.addEventListener( 'mousedown', onDocumentMouseDown, false );
		        document.addEventListener( 'touchstart', onDocumentTouchStart, false );  

				window.addEventListener( 'resize', onWindowResize, false );

			}

			function readTextFile(file) {
			    var rawFile = new XMLHttpRequest();
			    rawFile.open("GET", file, false);
			    rawFile.onreadystatechange = function ()
			    {
			        if(rawFile.readyState === 4)
			        {
			            if(rawFile.status === 200 || rawFile.status == 0)
			            {
			                var allText = rawFile.responseText;

			                if(file == "txt/nomesPrediosCarregar.txt") {
			                	nomes = allText.split(',');
			                }

			                else if(file == "txt/listaBusca.txt") {
			                	listaBusca = allText.split(',');
			                }

			                else if(file === "txt/nomesBusca.txt") {
			                	allText = allText.split(';');
			                	var contador = 0;
			                	var arrayAux = [];

			                	while(contador < allText.length) {
			                		if(allText[contador].length == 1) {
			                			arrayAux[arrayAux.length] = [allText[contador]];
			                		}
			                		else {
			                			var aux = allText[contador].split(',');
			                			arrayAux[arrayAux.length] = aux;
			                		}
			                		contador++;
			                	}
			                	nomesBusca = arrayAux;
			                }
			            }
			        }
			    }
			    rawFile.send(null);
			}

			function pesquisaPredios() {
				var obj = document.getElementById('search-criteria').value;
				obj = obj.toLowerCase();

				var cont = 0;
				var pesquisa = -1;

				for(var cont1 = 0;cont1 < listaBusca.length;cont1++) {
					if(listaBusca[cont1].search(obj) >= 0) {
						pesquisa = cont1;
						cont1 = listaBusca.length;
					}
				}

				if(pesquisa == -1) {
					alert("Objeto não encontrado!");
				}
				else {
					if(varBusca != -1){
						nomesBusca[varBusca].forEach(descolorir);
					}
					nomesBusca[pesquisa].forEach(colorir);
					varBusca = pesquisa;
				}
			}

			function descolorir(item) {
				var predio = scene.getObjectByName(item);
				predio.material.color.setHex(0xCBCBCB);
			}

			function colorir(item) {
				var predio = scene.getObjectByName(item);
				predio.material.color.setHex(0x2e3192);
			}

			function fload(item, index) {
				l = new THREE.JSONLoader();
				l.load( "json/" + item + ".js", function( geometry ) {
					var material = new THREE.MeshPhongMaterial( { color:0xCBCBCB } );
					var obj = new THREE.Mesh( geometry, material );
					obj.geometry.computeBoundingBox();
					obj.scale.set(400, 400, 400);
					obj.name = item;
					scene.add( obj );
					scene.traverse(function(children){objects.push(children)});
				})
			}


			function onDocumentTouchStart( event ) {

		        event.preventDefault();

		        event.clientX = event.touches[0].clientX;
		        event.clientY = event.touches[0].clientY;
		        onDocumentMouseDown( event );
	    	}

		    function onDocumentMouseDown( event ) {

		        event.preventDefault();

		        mouse.x = ( event.clientX / renderer.domElement.width ) * 2 - 1;
		        mouse.y = - ( event.clientY / renderer.domElement.height ) * 2 + 1;

		        raycaster.setFromCamera( mouse, camera );

		        var intersects = raycaster.intersectObjects( objects );

		        if ( intersects.length > 0 ) {
		        	if (intersects[ 0 ].object != plane && intersects[ 0 ].object != plano && intersects[ 0 ].object.name != "estrada" && intersects[ 0 ].object.name != "setas") {
		        		document.getElementById(intersects[ 0 ].object.name).click();
		        	}
		    	}
			}

			$(document).on('hidden.bs.modal', function (e) {
			    var target = $(e.target);
			    target.removeData('bs.modal')
			    .find(".clearable-content").html('');
			});

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );
			}

			function animate() {

				requestAnimationFrame( animate );
				controls.update();
				render();
			}

			function render() {
				renderer.render( scene, camera );
			}

		</script>
	</body>
</html>